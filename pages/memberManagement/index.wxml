<view class="container">
  <view class="header">
    <view class="title">æˆå‘˜ç®¡ç†</view>
    <view class="subtitle">{{ledgerInfo.ledgerName || 'è´¦æœ¬'}}</view>
  </view>

  <!-- æˆå‘˜åˆ—è¡¨ç»„ä»¶ -->
  <member-list
    id="memberList"
    ledgerNo="{{ledgerNo}}"
    bindmembertap="handleMemberTap"
    bindmoreactions="handleMoreActions"
  />

  <!-- æ“ä½œèœå• -->
  <view class="action-sheet" wx:if="{{showActionSheet}}">
    <view class="action-sheet-mask" bindtap="closeActionSheet"></view>
    <view class="action-sheet-content">
      <view class="action-sheet-header">
        <text class="action-sheet-title">{{currentMember.userName}}</text>
        <text class="action-sheet-role">{{currentMember.role}}</text>
      </view>

      <view class="action-sheet-actions">
        <!-- åªæœ‰åˆ›å»ºè€…å¯ä»¥è®¾ç½®ç®¡ç†å‘˜ -->
        <view class="action-item" bindtap="setAsAdmin" wx:if="{{isOwner && currentMember.roleType !== 'owner' && currentMember.roleType !== 'admin'}}">
          <text class="action-icon">ğŸ‘‘</text>
          <text class="action-text">è®¾ä¸ºç®¡ç†å‘˜</text>
        </view>

        <!-- åˆ›å»ºè€…å’Œç®¡ç†å‘˜å¯ä»¥ç§»é™¤æ™®é€šæˆå‘˜ -->
        <view class="action-item" bindtap="removeMember" wx:if="{{(isOwner || isAdmin) && currentMember.roleType === 'member'}}">
          <text class="action-icon">âŒ</text>
          <text class="action-text">ç§»é™¤æˆå‘˜</text>
        </view>

        <!-- åˆ›å»ºè€…å¯ä»¥ç§»é™¤ç®¡ç†å‘˜ -->
        <view class="action-item" bindtap="removeMember" wx:if="{{isOwner && currentMember.roleType === 'admin'}}">
          <text class="action-icon">âŒ</text>
          <text class="action-text">ç§»é™¤ç®¡ç†å‘˜</text>
        </view>
      </view>

      <view class="action-sheet-cancel" bindtap="closeActionSheet">å–æ¶ˆ</view>
    </view>
  </view>
</view>
