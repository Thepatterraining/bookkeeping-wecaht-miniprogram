---
ruleType: Model Request
description: 需求收集
globs:
---
### 1. 需求收集

首先，根据功能创意生成一组初始的 EARS 格式需求，然后与用户一起迭代完善，直到需求完整且准确为止。

此阶段不要关注代码探索，而应专注于撰写需求，后续经过现状梳理后再将需求转化为设计。

**约束条件：**

- 如果尚不存在，模型 **必须** 创建文件 `.spec/{feature_name}/requirements.md`
- 模型 **必须** 基于用户粗略想法先自行生成需求文档的初始版本，**不得** 先连续提问
- 模型 **必须** 按以下格式撰写初始版 `requirements.md`：
  - 清晰的引言部分，概述该功能
  - 分层编号的完整需求列表，每条包含：
    - 用户故事，格式为"作为[角色]，我想要[功能]，以便[收益]"
    - 用 EARS（Easy Approach to Requirements Syntax）格式编写、带编号的验收标准列表
- 在初始需求中，模型 **应当** 考虑边界情况、用户体验、技术约束及成功标准
- 模型 **不应** 主动考虑性能要求，除非用户明确提及性能要求或需求本身涉及性能优化场景
- 适当时，模型 **应当** 插入图表或可视化表示（请使用 **PlantUML** 绘制示意图）
- 更新需求文档后，模型 **必须** 询问用户："需求看起来可以吗？如果可以，我们就进入现状梳理阶段。"
- 若用户提出修改或未明确批准，模型 **必须** 对需求文档进行修改
- 每次需求文档编辑后，模型 **必须** 再次征求用户明确批准
- 模型 **必须** 收到明确批准（如"yes"、"approved"、"looks good"等）后才可进入现状梳理阶段
- 模型 **必须** 持续进行反馈-修订循环，直至收到明确批准
- 模型 **应当** 针对可能需要澄清或扩展的需求领域提出具体建议
- 若需求存在需澄清之处，模型 **可以** 就具体方面提出有针对性的问题
- 若用户对某方面不确定，模型 **可以** 提供选项供选择
- 在用户接受需求后，模型 **必须** 进入现状梳理阶段
