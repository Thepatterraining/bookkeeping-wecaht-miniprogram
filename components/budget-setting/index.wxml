<view class="budget-setting" wx:if="{{show}}">
  <!-- 遮罩层 -->
  <view class="mask" bindtap="closeBudgetSetting"></view>

  <!-- 弹窗内容 -->
  <view class="popup" bindtap="preventBubble">
    <!-- 标题栏 -->
    <view class="header">
      <text class="title">设置预算</text>
      <view class="close-btn" bindtap="closeBudgetSetting">
        <text class="close-icon">×</text>
      </view>
    </view>

    <!-- 表单内容 -->
    <view class="form">
      <!-- 预算月份选择 -->
      <view class="form-item">
        <text class="label">预算月份</text>
        <view class="date-picker" bindtap="openDatePicker">
          <text class="date-text">{{displayDate}}</text>
          <text class="arrow">></text>
        </view>
      </view>

      <!-- 预算金额输入 -->
      <view class="form-item">
        <text class="label">预算金额</text>
        <view class="amount-input">
          <text class="currency">¥</text>
          <input
            class="input"
            type="number"
            placeholder="请输入预算金额"
            value="{{budgetAmount}}"
            bindinput="onAmountInput"
          />
        </view>
      </view>
    </view>

    <!-- 操作按钮 -->
    <view class="actions">
      <button class="cancel-btn" bindtap="closeBudgetSetting">取消</button>
      <button
        class="confirm-btn {{submitting ? 'disabled' : ''}}"
        bindtap="submitBudget"
        disabled="{{submitting}}"
      >
        {{submitting ? '设置中...' : '确认设置'}}
      </button>
    </view>
  </view>

  <!-- 日期选择器 -->
  <picker
    wx:if="{{showDatePicker}}"
    mode="date"
    fields="month"
    value="{{budgetDate}}"
    bindchange="onDateChange"
    bindcancel="closeDatePicker"
  >
    <view></view>
  </picker>
</view>
